# bluepages


> Note: v1.x.x no longer works. Use v2.x.x


You will need access to IBM Intranet for using this module

## Installation

```
$ npm install bluepages --save
```

```js
var bluepages = require('bluepages')
```

### Functions included
* `authenticate`
* `authenticateGroup`
* `checkIfUserExists`
* `getUserInfo`
* `getImageByIntranetId`
* `getEmployeesOf`
* `getOrganisationOf`
* `getEmployeesByDept`


## `authenticate(intranetId,password,callback(err,verified))`
### Example
```js
var intranetId = req.body.intranetId; // email
var password = req.body.password;
bluepages.authenticate(intranetId,password,function(err,verified){
	if(err) console.log(err);
	else {
		if(verified) 
			console.log('Success');
		else 
			console.log('Invalid Credentials');
	}
});
```

## `authenticateGroup(intranetId,group,callback(err,result))`

	to authenticate bluegroups

### Example
```js
var intranetId = req.body.intranetId; // email
var group = 'group_name';
bluepages.authenticateGroup(intranetId,group,function(err,verified){
	if(err) console.log(err);
	else {
		if(verified)
			console.log('The user is present in '+ group +' group');
		else
			console.log('The user is not present in '+ group +' group');
	}
});
```

## `checkIfUserExists(intranetId,callback(err,exists))`
### Example
```js
var intranetId = req.body.intranetId; // email
bluepages.checkIfUserExists(intranetId,function(err,exists){
	if(err) console.log(err);
	else {
		if(exists) 
			console.log('User exists!');
		else 
			console.log('User does not exist!');
	}
});
```


#### For `getUserInfo` , `getEmployeesOf` , `getOrganisationOf`

* `userData` is an object

    Allowed forms for `userData`:
    * `{ uid: '123456789' }`
    * `{ email: 'email@email.com' }`

    
* `options` is an array of strings.

    Allowed Values for `options`:
    * `name`
    * `firstname`
    * `lastname`
    * `preferredidentity` (email)
    * `serialnumber`
    * `uid`
    * `jobresponsibilities`
    * `managerserialnumber`
    * `dept`
    * `employeecountrycode`
    * `employeetype`
    * `ismanager`
    * `mobile`
    * `co` (country)




## `getUserInfo(userData,options,callback(err,data))`
### Example 1
```js
var uid = req.body.uid; // 9 digit IBM user ID
var options = ['preferredidentity','dept'];
bluepages.getUserInfo({ uid: uid},options,function(err,data){
	if(err) console.log(err);
	else {
		console.log(data.preferredidentity);
		console.log(data.dept);
	}
});
```

### Example 2
```js
var email = req.body.email;
var options = ['name','uid'];
bluepages.getUserInfo({ email: email},options,function(err,data){
	if(err) console.log(err);
	else {
		console.log(data.name);
		console.log(data.uid);
	}
});
```

### Example 3
```js
var email = req.body.email;
var options = [];
bluepages.getUserInfo({ email: email},options,function(err,data){
	if(err) console.log(err);
	else {
		console.log(data); // includes all the allowed values for 'options'
	}
});
```

## `getImageByIntranetId(intranetId,callback(err,imageURL))`
### Example
```js
var intranetId = req.body.intranetId; // email
bluepages.getImageByIntranetId(intranetId,function(err,imageURL){
	if(err) console.log(err);
	else {
		console.log(imageURL); // URL for the user's image
	}
});
```

## `getEmployeesOf(userData,options,callback(err,data))`
### Example 1
```js
var uid = req.body.uid; // 9 digit IBM user ID
var options = ['preferredidentity','dept'];
bluepages.getEmployeesOf({ uid: uid},options,function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of employees
		for(var i=0 ; i<data.length ; i++){
			console.log('Sl No.',i+1);
			console.log(data[i].preferredidentity);
			console.log(data[i].dept);
		}
	}
});
```

### Example 2
```js
var email = req.body.email;
var options = ['name','uid'];
bluepages.getEmployeesOf({ email: email},options,function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of employees
		for(var i=0 ; i<data.length ; i++){
			console.log('Sl No.',i+1);
			console.log(data[i].name);
			console.log(data[i].uid);
		}
	}
});
```

### Example 3
```js
var email = req.body.email;
var options = [];
bluepages.getEmployeesOf({ email: email},options,function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of employees
		for(var i=0 ; i<data.length ; i++){
			console.log(data[i]); // includes all the allowed values for 'options'
		}
	}
});
```

## `getOrganisationOf(userData,callback(err,data))`

	returns `name`,`preferredidentity`,`uid`,`ismanager` of the users

### Example 1
```js
var uid = req.body.uid; // 9 digit IBM user ID
bluepages.getOrganisationOf({ uid: uid},function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of users in organisation
		for(var i=0 ; i<data.length ; i++){
			console.log(data[i]);
		}
	}
});
```

### Example 2
```js
var email = req.body.email;
bluepages.getOrganisationOf({ email: email},function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of users in organisation
		for(var i=0 ; i<data.length ; i++){
			console.log(data[i]);
		}
	}
});
```

## `getEmployeesByDept(dept,options,callback(err,data))`

### Example 1
```js
var dept = req.body.dept; // department
var options = ['preferredidentity','uid'];
bluepages.getEmployeesByDept(dept,options,function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of employees in department: dept
		for(var i=0 ; i<data.length ; i++){
			console.log(data[i].preferredidentity);
			console.log(data[i].uid);
		}
	}
});
```

### Example 2
```js
var dept = req.body.dept; // department
var options = [];
bluepages.getEmployeesByDept(dept,options,function(err,data){
	if(err) console.log(err);
	else {
		// 'data' includes array of employees in department: dept
		for(var i=0 ; i<data.length ; i++){
			console.log(data[i]); // includes all the allowed values for 'options'
		}
	}
});
```
